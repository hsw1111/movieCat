angular.module("myApp",["ngRoute","in_theaters","coming_soon","search","service"]).config(["$routeProvider",function(e){e.when("/in_theaters/:page",{templateUrl:"views/in_theaters/in_theaters.html",controller:"in_theatersCtrl"}).when("/coming_soon/:page",{templateUrl:"views/coming_soon/coming_soon.html",controller:"coming_soonCtrl"}).when("/search/:page/:keyword",{templateUrl:"views/search/search.html",controller:"searchCtrl"}).otherwise("/in_theaters/1")}]).controller("commonCtrl",["$scope","$location","$routeParams",function(e,o,t){e.search=function(){o.path("/search/1/"+e.keyword)}}]),angular.module("service",[]).service("myService",[function(){this.jsonp=function(e,o,t){var n="myJsonp_"+Math.random().toString().replace(".","");window[n]=t;var r="";for(var a in o)r+=a+"="+o[a]+"&";var c=document.createElement("script");c.src=e+"?"+r+"callback="+n,document.body.appendChild(c),c.onload=function(){document.body.removeChild(c)}}}]),angular.module("in_theaters",[]).controller("in_theatersCtrl",["$scope","myService","$routeParams","$location",function(e,o,t,n){var r=Number(t.page),a=10*(r-1),c=0;o.jsonp("https://api.douban.com/v2/movie/in_theaters",{count:10,start:a},function(o){e.result=o,c=Math.ceil(e.result.total/e.result.count),e.$apply()}),e.changePage=function(e){"prev"==e?--r<1&&(r=1):"next"==e&&++r>c&&(r=c),n.path("/in_theaters/"+r)}}]),angular.module("coming_soon",[]).controller("coming_soonCtrl",["$scope","myService","$routeParams","$location",function(e,o,t,n){var r=Number(t.page),a=10*(r-1),c=0;o.jsonp("https://api.douban.com/v2/movie/coming_soon",{count:10,start:a},function(o){e.result=o,c=Math.ceil(e.result.total/e.result.count),e.$apply()}),e.changePage=function(e){"prev"==e?--r<1&&(r=1):"next"==e&&++r>c&&(r=c),n.path("/coming_soon/"+r)}}]),angular.module("search",[]).controller("searchCtrl",["$scope","myService","$routeParams","$location",function(e,o,t,n){console.log(t);var r=Number(t.page),a=10*(r-1),c=0,l=t.keyword;o.jsonp("https://api.douban.com/v2/movie/search",{count:10,start:a,q:l},function(o){console.log(o),e.result=o,c=Math.ceil(e.result.total/e.result.count),e.$apply()}),e.changePage=function(e){"prev"==e?--r<1&&(r=1):"next"==e&&++r>c&&(r=c),n.path("/search/"+r+"/"+l)}}]);